<nav class="breadcrumb-container"
     [attr.data-theme]="theme"
     [attr.data-size]="size"
     aria-label="breadcrumb">
  <ol class="breadcrumb">
    @for(item of finalDisplayItems(); track item.url || item.label; let isLast = $last; let index = $index) {
      <li class="breadcrumb-item"
          [class.is-current]="isLast || item.active"
          [class.is-home]="index === 0"
          [class.is-disabled]="item.disabled"
          [class.is-clickable]="!isLast && !item.disabled && item.clickAble !== false">

        @if(isLast || item.active || item.disabled || item.clickAble === false) {
          <!-- 當前頁面或禁用項目，不可點擊 -->
          <span class="breadcrumb-content"
                [class.current]="isLast || item.active"
                [class.disabled]="item.disabled">
            @if(item.icon) {
              <lucide-icon [name]="item.icon" class="breadcrumb-icon"></lucide-icon>
            } @else if(index === 0 && showHomeIcon && !item.icon) {
              <lucide-icon name="home" class="breadcrumb-icon home-icon"></lucide-icon>
            }
            <span class="breadcrumb-text">{{ item.label }}</span>
          </span>
        } @else {
          <!-- 可點擊的導航項目 -->
          <button type="button"
                  class="breadcrumb-link"
                  (click)="onItemClick(item)"
                  (mouseenter)="onItemHover(item, true)"
                  (mouseleave)="onItemHover(item, false)"
                  [attr.aria-label]="'導航到 ' + item.label"
                  [disabled]="item.disabled">
            @if(item.icon) {
              <lucide-icon [name]="item.icon" class="breadcrumb-icon"></lucide-icon>
            } @else if(index === 0 && showHomeIcon && !item.icon) {
              <lucide-icon name="home" class="breadcrumb-icon home-icon"></lucide-icon>
            }
            <span class="breadcrumb-text">{{ item.label }}</span>
          </button>
        }
        @if(!isLast && !item.active) {
          <span class="breadcrumb-separator" aria-hidden="true">
            {{ getSeparatorContent() }}
          </span>
        }
      </li>
    }
  </ol>
</nav>
